
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Cr√©ation Design Loune's</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    canvas {
      border: 1px solid #ccc;
      margin-top: 10px;
    }
    .controls {
      margin-bottom: 10px;
    }
    label, select, input {
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>Cr√©er votre design personnalis√© üßµ</h1>

  <div class="controls">
    <label for="imgUpload">Image √† ajouter :</label>
    <input type="file" id="imgUpload" accept="image/*">

    <input type="text" id="textInput" placeholder="Votre texte ici">
    <select id="fontSelect">
      <option value="Arial">Arial</option>
      <option value="Comic Sans MS">Comic Sans</option>
      <option value="Times New Roman">Times New Roman</option>
      <option value="Courier New">Courier</option>
      <option value="Impact">Impact</option>
    </select>
    <button onclick="addText()">Ajouter texte</button>
    <button onclick="exportDesign()">Exporter</button>
  </div>

  <canvas id="canvas" width="500" height="400"></canvas>

  <script>
    const canvas = new fabric.Canvas('canvas');

    // Chargement d'une image par l'utilisateur
    document.getElementById('imgUpload').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(f) {
        fabric.Image.fromURL(f.target.result, function(img) {
          img.scaleToWidth(200);
          img.left = 150;
          img.top = 100;
          canvas.add(img);
        });
      }
      reader.readAsDataURL(file);
    });

    // Ajouter du texte personnalis√©
    function addText() {
      const text = document.getElementById('textInput').value;
      const font = document.getElementById('fontSelect').value;
      if (!text) return;

      const textbox = new fabric.Textbox(text, {
        left: 100,
        top: 50,
        fontSize: 24,
        fontFamily: font,
        fill: '#000'
      });
      canvas.add(textbox);
    }

    // Exporter le design
    function exportDesign() {
      const dataURL = canvas.toDataURL({ format: 'png' });
      const link = document.createElement('a');
      link.download = 'mon_design.png';
      link.href = dataURL;
      link.click();
    }
  </script>
</body>
</html>